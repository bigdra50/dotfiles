---
allowed-tools:
  - Read
  - Write
  - TodoWrite
description: Dump task plan and progress to markdown file for session recovery
---

# タスク状態のダンプと保存

現在の計画と進捗をマークダウンファイルに保存し、別セッションで簡単にキャッチアップできるようにします。

## 正確な日時情報:

- 現在の日時(表示用): !`date '+%Y-%m-%d %H:%M:%S'`
- ファイル名用タイムスタンプ: !`date '+%Y%m%d-%H%M%S'`

## ワークフロー:

1. **現在の状態を収集**
   - 実行中のタスク一覧
   - 完了済みタスク
   - 保留中のタスク
   - 関連ファイルパス

2. **構造化されたマークダウン生成**

   ```
   # [プロジェクト名] - タスク状態ダンプ

   生成日時: !`date '+%Y-%m-%d %H:%M:%S'`

   ## 概要
   [タスクの全体像を1-2文で]

   ## 進捗状況

   ### ✅ 完了済み
   - [x] タスク1
   - [x] タスク2

   ### 🔄 実行中
   - [ ] タスク3 (進行度: 50%)

   ### 📋 保留中
   - [ ] タスク4
   - [ ] タスク5

   ## 重要な決定事項
   - 決定1: 理由
   - 決定2: 理由

   ## 関連ファイル
   - `path/to/file1.ts`
   - `path/to/file2.ts`

   ## 次のステップ
   1. [次に実行すべきアクション]
   2. [その次のアクション]

   ## 注意事項
   - [引き継ぎ時に知っておくべき重要事項]
   ```

3. **ファイル保存**
   - デフォルト: `./.claude/state/task-dump-!`date '+%Y%m%d-%H%M%S'`.md`
   - ファイル名には上記の「{ファイル名用タイムスタンプ}-{タスク内容の要約}」を使用
   - カスタムパス対応: `/dump path/to/file.md`

## エラーハンドリング:

- `.claude/state/` ディレクトリが存在しない場合は自動作成
- 既存ファイルがある場合は上書き確認
