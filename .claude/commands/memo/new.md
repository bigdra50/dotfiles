# memo:new

Obsidian用のメモを会話の文脈やプロンプトに応じて新規作成します。

## ワークフロー:

1. **文脈分析**
   - 現在の会話内容から主要トピックを抽出
   - ユーザーが提供した情報から関連技術・概念を特定
   - メモの目的（知識整理、実装メモ、設計記録など）を判断

2. **メモ構造設計**
   - タイトルの生成（簡潔で検索しやすい形式）
   - 適切なタグの選定（技術スタック、プロジェクト、カテゴリ）
   - セクション構成の決定（概要、詳細、実装例、参考資料など）

3. **コンテンツ生成**
   - 会話内容から重要な情報を整理・構造化
   - コード例やコマンドを適切に配置
   - 関連する既存メモへのリンクを追加（可能な場合）

4. **ファイル作成と保存**
   - 環境変数 $DOCS が指すディレクトリを確認
   - 適切なファイル名を生成（日付またはトピック名）
   - メモファイルを作成・保存
   - 作成したファイルパスを通知

## メモテンプレート:

```markdown
# [タイトル]

#[tag1] #[tag2] #[tag3]

**Tags:** `#[tag1]` `#[tag2]` `#[tag3]`  
**Last Updated:** [YYYY-MM-DD]  
**Version:** 1.0.0

[概要説明]

## 📋 概要

[トピックの簡潔な説明]

## 📝 詳細

### [サブトピック1]

[詳細内容]

### [サブトピック2]

[詳細内容]

## 💻 実装例/コード

```[言語]
[コード例]
```

## 🔗 関連リソース

- [関連メモ1]
- [関連メモ2]
- [外部リンク]

## 📌 注意事項

- [重要な注意点]

## 🔄 更新履歴

| バージョン | 日付 | 変更内容 | 
|-----------|------|----------|
| 1.0.0 | [YYYY-MM-DD] | 初版作成 |
```

## 使用例:

```bash
# 会話の文脈からメモを自動生成
claude /memo:new

# 特定のトピックについてメモを作成
claude /memo:new "Unity Loggingの実装パターン"

# タグを指定してメモを作成
claude /memo:new "Docker設定" --tags "docker,devops,infrastructure"
```

## エラーハンドリング:

- **$DOCS未設定**: 環境変数が設定されていない場合の警告とデフォルトパス提案
- **ディレクトリアクセスエラー**: 書き込み権限がない場合の代替パス提示
- **ファイル名重複**: 既存ファイルがある場合は番号を付けて保存
- **文脈不足**: 会話内容が少ない場合は対話的に情報収集

## 実装の詳細:

### タグ生成ロジック
- 技術キーワードの自動抽出（Unity, Docker, Claude Code など）
- カテゴリ分類（#implementation, #design, #troubleshooting など）
- プロジェクト関連タグの推定

### ファイル名生成パターン
- トピックベース: `unity-logging-guide.md`
- 日付ベース: `2025-08-16-docker-setup.md`
- カテゴリベース: `claude-code-[機能名].md`

### 既存メモとの連携
- 同じタグを持つメモの検索と関連付け
- シリーズ化されたメモの番号付け
- ナレッジグラフへの統合支援