# Agent選択ガイド

## Claude Code Agent対応表

| タスク種別 | Agent | 備考 |
|-----------|-------|------|
| ファイル探索・検索 | Explore | コードベース探索に最適 |
| 設計・計画 | Plan | アーキテクチャ検討 |
| コード実装・編集 | default | ファイル編集を含む作業 |
| コードレビュー | code-reviewer | 品質・セキュリティチェック |
| 汎用調査 | general-purpose | Web検索含む調査 |
| 単純なコマンド | Bash直接 | オーバーヘッド削減 |

## 選択フローチャート

```
タスクの性質を判定
    │
    ├─ ファイル構造・コード検索が必要？
    │   └─ Yes → Explore
    │
    ├─ 設計判断・アーキテクチャ検討が必要？
    │   └─ Yes → Plan
    │
    ├─ コード品質・セキュリティ確認が必要？
    │   └─ Yes → code-reviewer
    │
    ├─ Web検索・外部情報収集が必要？
    │   └─ Yes → general-purpose
    │
    ├─ ファイル編集・コード実装が必要？
    │   └─ Yes → default
    │
    └─ 単純なシェルコマンド？
        └─ Yes → Bash直接実行
```

## オーケストレーターが直接実行可

委譲のオーバーヘッドを避けるため、以下は直接実行:

- `git status`, `git log`, `git diff`（読み取り系）
- `ls`, ディレクトリ構造確認
- TodoWrite更新
- 小規模なファイル確認（数十行程度）

## Agent委譲時のプロンプト形式

```
Task(
  subagent_type: "[Agent名]",
  prompt: "
    タスク: [具体的な指示]
    スコープ: [対象範囲と除外事項]
    前ステップから: [Handoff情報]
    期待出力形式: サブタスク完了レポート形式
  "
)
```

## 並列実行の判断基準

**並列実行可能:**
- 各タスクが独立したファイル/リソースを対象
- 相互に依存関係がない
- 同じAgentタイプでも異なるスコープ

**順次実行が必要:**
- 前タスクの出力が次タスクの入力になる
- 同一ファイルへの編集
- 設計決定後に実装が必要
